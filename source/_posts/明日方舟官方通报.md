---
title: 明日方舟官方通报
date: 2022-08-07 18:22:00
updated: 2022-08-07 18:22:00
tags: [明日方舟, 通报]
categories: [明日方舟, 通报]
top: 1
---
<script>
组合html信息(获取最新api消息());

function 获取最新api消息() {
    var req = new XMLHttpRequest();
    req.open('GET', 'https://prts.top/api/ak-conf/', false);
    req.send(null);
    return JSON.parse(req.response);
}

function 组合html信息(data) {
    返回值 = '';
    数组信息 = data.announceList;
    数组长度 = 数组信息.length;
    for (i = 0; i < 数组长度; i++) {
        标题 = 数组信息[i].title;
        if (!(数组信息[i].isWebUrl)) {
            break;
        };
        数据url = 数组信息[i].webUrl;
        数据id = 数据url.substring(50, 数据url.indexOf('.html'));
        var req = new XMLHttpRequest();
        req.open('GET', 'https://prts.top/api/ak-conf/?id=' + 数据id, false);
        req.send(null);

        返回值 = 返回值 + ';' + 数据url;
    }
    return
}
async function 组合html信息(data) {
    返回值 = '';
    数组信息 = data.announceList;
    数组长度 = 数组信息.length;
    for (i = 0; i < 数组长度; i++) {
        标题 = 数组信息[i].title;
        if (!(数组信息[i].isWebUrl)) {
            break;
        };
        数据url = 数组信息[i].webUrl;
        数据id = 数据url.substring(50, 数据url.indexOf('.html'));
        const replacehtml = await fetch('https://prts.top/api/ak-conf/?id=' + 数据id);
        const returnhtml = await replacehtml.text();
        returndata = returnhtml.substring(returnhtml.indexOf('<div class="main">'), returnhtml.indexOf('</body>\n</html>'));
        returndata = returndata.split('<img class="banner-image" src="').join('<img src="');
        returndata = returndata.split('uniwebview://move?target=shop&param1=SKINSHOP').join('https://ak.hypergryph.com/');
        返回值 = 返回值 + '<h1>' + 标题 + '</h1>' + '<br>' + returndata;
        document.getElementById("tnxg_akmessage").innerHTML = 返回值;
    }
}
</script>
<div id="tnxg_akmessage"></div>