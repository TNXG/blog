<script>
    if ('serviceWorker' in navigator) {
        if (Number(window.localStorage.getItem('TNXGBlogSW_Set')) < 1) {
            setTimeout(async () => {
                window.stop()
                window.localStorage.setItem('TNXGBlogSW_Set', 1)
                const replacehtml = await fetch('https://npm.elemecdn.com/tnxg-resource@0.0.2/pages/swinstall.html')
                document.body.innerHTML = await replacehtml.text()
            }, 0);
        }
        const $ = document.querySelector.bind(document);
        navigator.serviceWorker.register(`/sw.js?time=${ranN(1, 88888888888888888888)}`)
            .then(async () => {
                if (Number(window.localStorage.getItem('TNXGBlogSW_Set')) < 2) {
                    setTimeout(() => {
                        $('#info').innerText = '安装成功,稍等片刻...';
                    }, 0);
                    setTimeout(() => {
                        window.localStorage.setItem('TNXGBlogSW_Set', 2)
                        window.location.reload()
                    }, 1500)
                }
            })
            .catch(err => console.error(`TNXGBlogSWError:${err}`))
    }
</script>
<script src="https://npm.elemecdn.com/qexo-static@1.3.0/hexo/statistic/statistic.js"></script>
<script src="https://npm.elemecdn.com/tnxg-blog@latest/assets/js/message.js"></script>
<script>
    loadStatistic("https://qexo.prts.top");
</script>